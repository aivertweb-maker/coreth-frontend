<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - Coreth Clothing</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="checkout.css">
</head>
<body>

<!-- Back Button -->
<a href="cart.html" class="back-btn">
  <i class="fa-solid fa-arrow-left"></i>
  Back to Cart
</a>

<!-- Checkout Section -->
<section class="checkout-section">
  <div class="checkout-container">
    
    <h1 class="checkout-title">Checkout</h1>
    
    <div class="checkout-layout">
      
      <!-- Left: Shipping Form -->
      <div class="shipping-form-container">
        <h2 class="section-title">Shipping Information</h2>
        
        <form class="shipping-form" id="shippingForm">
          
          <div class="form-group">
            <label for="fullName">Full Name *</label>
            <input type="text" id="fullName" name="fullName" required placeholder="Enter your full name">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email">Email Address *</label>
              <input type="email" id="email" name="email" required placeholder="your@email.com">
            </div>
            <div class="form-group">
              <label for="phone">Contact Number *</label>
              <input type="tel" id="phone" name="phone" required placeholder="+91 98765 43210">
            </div>
          </div>

          <div class="form-group">
            <label for="country">Country *</label>
            <select id="country" name="country" required>
              <option value="India" selected>India</option>
              <option value="USA">United States</option>
              <option value="UK">United Kingdom</option>
              <option value="Canada">Canada</option>
              <option value="Australia">Australia</option>
            </select>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="state">State *</label>
              <input type="text" id="state" name="state" required placeholder="Enter state">
            </div>
            <div class="form-group">
              <label for="district">District *</label>
              <input type="text" id="district" name="district" required placeholder="Enter district">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="city">City/Town *</label>
              <input type="text" id="city" name="city" required placeholder="Enter city or town">
            </div>
            <div class="form-group">
              <label for="pincode">PIN Code *</label>
              <input type="text" id="pincode" name="pincode" required placeholder="Enter PIN code">
            </div>
          </div>

          <div class="form-group">
            <label for="area">Area/Locality *</label>
            <input type="text" id="area" name="area" required placeholder="Enter area or locality">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="houseNo">House/Flat No. *</label>
              <input type="text" id="houseNo" name="houseNo" required placeholder="House/Flat number">
            </div>
            <div class="form-group">
              <label for="street">Street Name *</label>
              <input type="text" id="street" name="street" required placeholder="Street name">
            </div>
          </div>

          <div class="form-group">
            <label for="message">Message for Us (Optional)</label>
            <textarea id="message" name="message" rows="4" placeholder="Any special instructions or notes..."></textarea>
          </div>

          <button type="submit" class="proceed-btn">
            <i class="fa-solid fa-lock"></i>
            <span>Proceed to Payment</span>
          </button>

        </form>
      </div>

      <!-- Right: Order Summary -->
      <div class="order-summary-container">
        <div class="order-summary-sticky">
          
          <h2 class="section-title">Order Summary</h2>
          
          <div class="order-items" id="orderItems">
            <!-- Items will be loaded here dynamically -->
          </div>

          <div class="order-totals">
            <div class="total-row">
              <span>Subtotal</span>
              <span class="subtotal">₹0</span>
            </div>
            <div class="total-row">
              <span>Shipping</span>
              <span class="shipping">Free</span>
            </div>
            <div class="total-row">
              <span>Tax (18%)</span>
              <span class="tax">₹0</span>
            </div>
            <div class="total-divider"></div>
            <div class="total-row grand-total">
              <span>Total</span>
              <span class="total">₹0</span>
            </div>
          </div>

        </div>
      </div>

    </div>

  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <div class="footer-container">
    <div class="footer-bottom">
      <p>&copy; 2026 Coreth Clothing. All Rights Reserved.</p>
      <p>
        <a href="https://www.instagram.com/aivertweb" target="_blank" rel="noopener noreferrer" class="designer-link">
          Designed by Anvita
        </a>
      </p>
    </div>
  </div>
</footer>

<script>
// Load cart items and display order summary
async function loadOrderSummary() {
  try {
    const response = await fetch('https://coreth-backend.onrender.com/api/cart');
    const cartItems = await response.json();
    
    if (cartItems.length === 0) {
      alert('Your cart is empty!');
      window.location.href = 'index.html';
      return;
    }
    
    displayOrderItems(cartItems);
    calculateTotals(cartItems);
    
  } catch (error) {
    console.error('Error loading order summary:', error);
    alert('Failed to load order summary!');
  }
}

// Display order items
function displayOrderItems(items) {
  const orderItemsContainer = document.getElementById('orderItems');
  
  orderItemsContainer.innerHTML = items.map(item => `
    <div class="order-item">
      <div class="order-item-image">
        <img src="${item.image}" alt="${item.name}">
        <span class="item-qty">${item.quantity}</span>
      </div>
      <div class="order-item-details">
        <h4>${item.name}</h4>
        <p>Size: ${item.size}</p>
      </div>
      <div class="order-item-price">
        ₹${(item.price * item.quantity).toLocaleString('en-IN')}
      </div>
    </div>
  `).join('');
}

// Calculate totals
function calculateTotals(items) {
  const subtotal = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  const tax = Math.round(subtotal * 0.18);
  const total = subtotal + tax;
  
  document.querySelector('.subtotal').textContent = `₹${subtotal.toLocaleString('en-IN')}`;
  document.querySelector('.tax').textContent = `₹${tax.toLocaleString('en-IN')}`;
  document.querySelector('.total').textContent = `₹${total.toLocaleString('en-IN')}`;
}

// Handle form submission
document.getElementById('shippingForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  // Get form data
  const formData = new FormData(this);
  const shippingData = Object.fromEntries(formData);
  
  console.log('Shipping Information:', shippingData);
  
  // Show payment integration message
  alert('Payment integration coming soon! Your order details have been saved.');
  
  // Optionally redirect to home page
  // window.location.href = 'index.html';
});

// Load order summary on page load
window.addEventListener('load', () => {
  loadOrderSummary();
  
  // Add animation
  setTimeout(() => {
    document.querySelector('.shipping-form-container').classList.add('animate-in');
    document.querySelector('.order-summary-container').classList.add('animate-in');
  }, 100);
});
</script>

</body>
</html>
